/*! * sortable-table.js 0.2 * MIT licensed * * Created by Daniel Imms, http://danielimms.blogspot.com.au */(function(){function j(c){if("click"==c.type||13==c.keyCode){var a=$(this).closest("table"),c=h($(a).find("tbody"),c.data.columnIndex);k(a,c,this)}}function k(c,a,e){var f=$(e).hasClass(d)&&!$(e).hasClass(i);$(a).each(function(a,b){$(b).remove();f?$(b).prependTo(c):$(b).appendTo(c)});$(e).hasClass(d)?$(e).toggleClass(i):(a=$(c).find("th"),$(a).removeClass(d),$(a).removeClass(i),$(e).addClass(d))}function h(c,a){if(1>=c.length)return c;var e=[],f=[],l=Math.floor(c.length/2);$(c).each(function(b,a){b<l?e[b]=a:f[b-l]=a});for(var b=h(e,a),g=h(f,a),d=[];0<b.length||0<g.length;)0<b.length&&0<g.length?$($(b[0]).find("td")[a]).html().toLowerCase()<$($(g[0]).find("td")[a]).html().toLowerCase()?d.push(b.shift()):d.push(g.shift()):0<b.length?d.push(b.shift()):0<g.length&&d.push(g.shift());return d}var d="sorted",i="desc";$(document).ready(function(){$("table.sortable").each(function(c,a){var e=!1,f=$(a).find("thead  tr").children();f.each(function(f,b){if($(b).hasClass(d)){$(b).toggleClass(i);var g=h($(a).find("tbody"),c);k(a,g,b);e=!0;return!1}});f.each(function(a,b){!e&&0==a&&$(b).addClass(d);$(this).attr("tabindex","0");$(this).attr("title","Sort by "+$(this).html().toLowerCase()+" column");$("<span>").appendTo(b);$(b).click({columnIndex:a},j).keydown({columnIndex:a},j)})})})})();